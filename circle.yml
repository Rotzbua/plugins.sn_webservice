## Customize the test machine
machine:

  timezone:
    Europe/Berlin # Set the timezone

  # Add some environment variables
  environment:
    CIRCLE_ENV: test
  php:
    version: 7.0.17

dependencies:
  override:
    - mkdir -p ~/.go_project/src/github.com/${CIRCLE_PROJECT_USERNAME}
    - ln -s ${HOME}/${CIRCLE_PROJECT_REPONAME} ${HOME}/.go_project/src/github.com/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}
    - go get github.com/aktau/github-release

## Customize test commands
test:
  override:
    - mkdir -p $CIRCLE_TEST_REPORTS/phpunit
    - phpunit --log-junit $CIRCLE_TEST_REPORTS/phpunit/junit.xml -c Tests/Builds/UnitTests.xml

deployment:
  release:
    tag: /[0-9]+(\.[0-9]+)*/
    owner: scoutnet
    commands:
      - make release
